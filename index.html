<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kalkulator KP</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.3/jspdf.umd.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #f4f4f4;
      margin: 0;
      padding: 20px;
    }
    .container {
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      max-width: 1200px;
      margin: 0 auto;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .title {
      font-size: 24px;
      color: #333;
    }
    .description {
      margin-top: 5px;
      color: #555;
    }

    .ubah-tarif-button {
      background-color: #ddd;
      border: none;
      padding: 10px 15px;
      border-radius: 4px;
      cursor: pointer;
    }
    .ubah-tarif-button:hover {
      background-color: #ccc;
    }
    .form-group {
      margin-bottom: 15px;
      display: flex;
      justify-content: flex-start;
      align-items: center;
    }
    label {
      flex: 1;
      margin-right: 10px;
      font-weight: bold;
      color: #555;
    }

    input[type="text"], select, input[type="number"] {
      flex: 2;
      padding: 10px;
      border: 1px solid #ddd;
      border-radius: 4px;
      box-sizing: border-box;
      max-width: 30%; /* Batasi lebar input sesuai kebutuhan */
      text-align: left; /* Rata kiri */
      font-size: 12px; /* Ubah ukuran font */
    }

    .unit-label {
      margin-left: 10px;
      font-weight: bold;
    }
    .tambah-properti-button {
      width: 100%;
      padding: 10px;
      background-color: #007bff;
      border: none;
      border-radius: 4px;
      color: white;
      font-size: 16px;
      cursor: pointer;
      margin-top: 10px;
    }
    .tambah-properti-button:hover {
      background-color: #0056b3;
    }
    #hasil {
      margin-top: 20px;
      font-size: 18px;
      font-weight: bold;
      text-align: center;
    }
    .property-list {
      margin-top: 20px;
      overflow-x: auto;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      table-layout: fixed;
      font-size: 0.75em;
    }
    table, th, td {
      border: 1px solid #ddd;
    }
    th, td {
      padding: 8px;
      text-align: center;
      word-wrap: break-word;
    }
    th {
      background-color: #f0f0f0;
    }
    #total-hasil {
      margin-top: 10px;
      font-size: 16px;
      font-weight: bold;
      text-align: right;
    }
    .action-buttons {
      display: flex;
      justify-content: space-between;
      margin-top: 20px;
    }
    .action-buttons button {
      width: 48%;
      padding: 10px;
      font-size: 16px;
      cursor: pointer;
      border: none;
      border-radius: 4px;
      color: white;
    }
    .simpan-button {
      background-color: #28a745;
    }
    .simpan-button:hover {
      background-color: #218838;
    }
    .reset-button {
      background-color: #dc3545;
    }
    .reset-button:hover {
      background-color: #c82333;
    }
    /* Modal untuk mengubah tarif */
    #ubahTarifModal {
      display: none;
      position: fixed;
      z-index: 1;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
    }
    #ubahTarifModal > div {
      background-color: #fff;
      padding: 20px;
      border-radius: 8px;
      max-width: 400px;
      width: 100%;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    #tarifTable input {
      width: 120px; /* Perbesar ukuran box input */
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <div>
        <h1 class="title">Kalkulator KP</h1>
        <p class="description">Kalkulator ini digunakan untuk menghitung kontribusi pembangunan berdasarkan kategori hunian atau non-hunian sesuai dengan luasan unit dan jumlah unit.</p>
      </div>
      <button class="ubah-tarif-button" onclick="checkPassword()">Ubah Tarif</button>
    </div>

<div class="form-group">
  <label for="fungsi-proyek">Fungsi Proyek:</label>
  <select id="fungsi-proyek" name="fungsi-proyek">
    <!-- Hunian -->
    <optgroup label="Hunian">
      <option value="Landed House">Rumah Tapak (Landed House)</option>
      <option value="Condominium">Rumah Susun</option>
      <option value="Apartment">Apartemen</option>
    </optgroup>
    
    <!-- Non-Hunian -->
    <optgroup label="Sarana Umum">
      <option value="University">Universitas</option>
      <option value="Clinic">Klinik, Praktek Dokter Bersama</option>
      <option value="Laboratory">Laboratorium</option>
      <option value="Hospital">Rumah Sakit</option>
      <option value="Recreation">Tempat Rekreasi Olahraga</option>
      <option value="Art Building">Gedung Kesenian</option>
      <option value="Sports Building">Gedung Olahraga</option>
    </optgroup>
    
    <optgroup label="Komersial">
      <option value="Rental Office">Kantor Sewa</option>
      <option value="Co-Working Space">Co-Working Space</option>
      <option value="Mall">Perbelanjaan/Mall</option>
      <option value="Shops">Pertokoan</option>
      <option value="Function Hall">Function Hall</option>
      <option value="Hotel">Hotel, Condotel, Service Apartemen</option>
      <option value="Shophouse">Rukan, Ruko</option>
      <option value="Cafe">Kafe, Resto, Kedai</option>
      <option value="Showroom">Showroom</option>
      <option value="Marketing Office">Marketing Office</option>
      <option value="Workshop">Bengkel</option>
      <option value="Entertainment Venue">Tempat Hiburan</option>
    </optgroup>
    
    <optgroup label="Industri">
      <option value="Factory">Pabrik</option>
      <option value="Convection">Konveksi</option>
      <option value="Warehouse">Pergudangan</option>
      <option value="Batching Plant">Batching Plant</option>
    </optgroup>
  </select>
</div>


    <div class="form-group">
      <label for="nama-proyek">Nama Proyek:</label>
      <input type="text" id="nama-proyek" name="nama-proyek" required>
    </div>

    <div class="form-group">
      <label for="luas">Luas Unit:</label>
      <input type="number" id="luas" name="luas" step="0.01" min="0.01" required>
      <span class="unit-label">m²</span>
    </div>

    <div class="form-group">
      <label for="jumlah-unit">Jumlah Unit:</label>
      <input type="number" id="jumlah-unit" name="jumlah-unit" value="1" min="1" required>
      <span class="unit-label">unit</span>
    </div>

    <button class="tambah-properti-button" onclick="tambahProperti()">Tambah Properti</button>

    <div class="property-list" id="property-list" style="display: none;">
      <h3>Daftar Properti</h3>
      <table>
        <thead>
          <tr>
            <th>Nama Proyek</th>
            <th>Fungsi/Kegiatan</th>
            <th>Kategori</th>
            <th>Kelompok Sub-Kategori</th>
            <th>Kode Sub-Kategori</th>
            <th>Luas Unit (m²)</th>
            <th>Jumlah Unit</th>
            <th>Tarif per m² (Rp)</th>
            <th>Total KP (Rp)</th>
          </tr>
        </thead>
        <tbody id="property-items"></tbody>
      </table>
      <div id="total-hasil"></div>

      <div class="action-buttons">
        <button class="simpan-button" onclick="simpanPDF()">Simpan</button>
        <button class="reset-button" onclick="resetSemua()">Reset</button>
      </div>
    </div>
  </div>

  <!-- Modal untuk mengubah tarif -->
  <div id="ubahTarifModal">
    <div>
      <h3>Ubah Tarif</h3>
      <table id="tarifTable">
        <thead>
          <tr>
            <th>Kode Sub-Kategori</th>
            <th>Tarif per m² (Rp)</th>
          </tr>
        </thead>
        <tbody>
          <!-- Baris tarif akan dimasukkan melalui JavaScript -->
        </tbody>
      </table>
      <button onclick="simpanTarifBaru()">Simpan Tarif</button>
      <button onclick="tutupModal()">Batal</button>
    </div>
  </div>

  <script>
    // Fungsi password
    function checkPassword() {
      const kodeAkses = prompt("Masukkan kode akses untuk mengubah tarif:");
      if (kodeAkses === "kpjepei2024") {
        ubahTarif();
      } else {
        alert("Kode akses salah.");
      }
    }

    function resetForm() {
      document.getElementById('fungsi-proyek').selectedIndex = 0;
      document.getElementById('nama-proyek').value = '';  // Reset nama proyek
      document.getElementById('luas').value = '';
      document.getElementById('jumlah-unit').value = '1';
    }

    // Lainnya seperti sebelumnya...
  </script>
</body>
</html>
